function productsDirective(n,t,i,r){return{restrict:"A",templateUrl:"Site/shared/directives/productsDirective/productsDirective.html",scope:!0,link:function(n){n.addToFavorites=function(r,u){if(u.stopPropagation(),!n.$parent.$parent.token){t.error("Please login first!");return}if(n.$parent.$parent.favorites.filter(function(n){return n.id===r.id}).length>0){t.error("This product is allready added!");return}i.postProductToFavorites(n.$parent.$parent.user.userName,n.$parent.$parent.token,r.id).then(function(){n.$parent.$parent.favorites.push(r);t.success("Product added to Favorites!")},function(n){console.log(n)})};n.openPopup=function(n,t){t.stopPropagation();r.open({animation:!0,templateUrl:"Site/popup/popup.html",controller:"popupController",resolve:{id:function(){return n}}})}}}}app.directive("productsDirective",["$location","toastr","favoritesService","$uibModal","$timeout",productsDirective]);