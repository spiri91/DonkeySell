function customAlertsService(n,t){this.composeAddress=function(t){return n+"Users/"+t+"/Alerts"};this.getAlerts=function(n,i){return t({method:"GET",url:this.composeAddress(n),headers:{Authorization:"Bearer "+i}})};this.postAlert=function(n,i,r){return t({method:"POST",url:this.composeAddress(r),headers:{Authorization:"Bearer "+i},data:n})};this.deleteAlert=function(n,i,r){return t({method:"DELETE",url:this.composeAddress(r)+"/"+n,headers:{Authorization:"Bearer "+i}})}}function favoritesService(n,t){return this.composeAddress=function(t){return n+"Users/"+t+"/Favorites"},this.getFavoritesProducts=function(n,i){return t({method:"GET",url:this.composeAddress(n),headers:{Authorization:"Bearer "+i}})},this.postProductToFavorites=function(n,i,r){return t({method:"POST",url:this.composeAddress(n)+"/"+r,headers:{Authorization:"Bearer "+i}})},this.deleteFromFavoritesProducts=function(n,i,r){return t({method:"DELETE",url:this.composeAddress(n)+"/"+r,headers:{Authorization:"Bearer "+i}})},this}function friendsService(n,t){return this.composeAddress=function(t){return n+"Users/"+t+"/Friends"},this.getFriends=function(n,i){return t({method:"GET",url:this.composeAddress(n),headers:{Authorization:"Bearer "+i}})},this.postFriend=function(n,i,r){return t({method:"POST",url:this.composeAddress(n)+"/"+i,headers:{Authorization:"Bearer "+r}})},this.deleteFriend=function(n,i,r){return t({method:"DELETE",url:this.composeAddress(n)+"/"+i,headers:{Authorization:"Bearer "+r}})},this}function improvementsService(n,t){return this.fullApiAddress=n+"Improvements",this.postImprovement=function(n){return t.post(this.fullApiAddress,n)},this}function messagesService(n,t){return this.composeAddress=function(t){return n+"Products/"+t+"/Messages"},this.getMessagesForProduct=function(n){let i=this.composeAddress(n);return t.get(i)},this.postMessageForProduct=function(n,i){let r=this.composeAddress(n.productId);return t({method:"POST",url:r,headers:{Authorization:"Bearer "+i},data:n})},this.deleteMessage=function(n,i,r){let u=this.composeAddress(n)+"/"+i;return t({method:"DELETE",url:u,headers:{Authorization:"Bearer "+r}})},this}function othersService(n,t){return this.urlApiAddress=n+"Other",this.getCategories=function(){let n=this.urlApiAddress+"/categories";return t.get(n)},this.getCities=function(){let n=this.urlApiAddress+"/cities";return t.get(n)},this.usernameIsTaken=function(n){let i=this.urlApiAddress+"/usernameIsNotTaken/"+n;return t.get(i)},this.emailInUse=function(n){let i=n.replace(/\./g,"$"),r=this.urlApiAddress+"/emailNotInUse/"+i;return t.get(r)},this.usersLike=function(n){let i=this.urlApiAddress+"/findUser/"+n;return t.get(i)},this}function productNavigationService(n,t){return this.query="",this.skip=0,this.sortBy={},this.currentId=0,this.productsIds=[],this.count=0,this.defaultItemsPerPage=10,this.productsService=n,this.setValues=function(n,t,i,r,u){this.query=n;this.skip=t;this.sortBy=i;this.count=r;this.productsIds=u},this.getNextProduct=function(n){let t=this.productsIds.indexOf(n);return t===this.productsIds.length-1?null:this.productsIds[t+1]},this.getPreviousProduct=function(n){let t=this.productsIds.indexOf(n);return t===0?null:this.productsIds[t-1]},this.getNextProducts=function(){return this.skip+=this.productsIds.length,this.getProducts()},this.getPreviousProducts=function(){return this.skip-=this.defaultItemsPerPage,this.skip<0&&(this.skip=0),this.getProducts()},this.getProducts=function(){if(this.query)return this.productsService.queryProducts(this.query,this.defaultItemsPerPage,this.skip,this.sortBy.value,this.sortBy.sortDirection);let n=t.defer();return n.resolve(),n.promise},this.setProductsIds=function(n,t){for(let i=0;i<=n.length;++i)t===!1?this.productsIds.push(n[i]):this.productsIds.unshift(n[i])},this.checkIfIdIsAllreadyAdded=function(n){return this.productsIds.indexOf(n)>=0},this}function productsService(n,t){return this.productsApiAdress=n+"Products",this.queryProducts=function(n,i,r,u,f){return t({method:"GET",url:this.productsApiAdress+"/query/"+n+"/"+i+"/"+r+"/"+u+"/"+f})},this.getProduct=function(n){return t.get(this.productsApiAdress+"/"+n)},this.deleteProduct=function(n,i){return t({method:"DELETE",url:this.productsApiAdress+"/"+n,headers:{Authorization:"Bearer "+i}})},this.addProduct=function(n,i){return t({method:"POST",url:this.productsApiAdress,headers:{Authorization:"Bearer "+i},data:n})},this.getProductsOfUser=function(n){return t.get(this.productsApiAdress+"/"+n)},this}function queryBuilderService(){return this.buildQuery=function(n){let t="";for(let i=0;i<n.length;i++){let r=n[i].title+","+n[i].minValue;n[i].maxValue&&(r+=","+n[i].maxValue);n[i].useLike&&(r+=",true");n[i].useOr&&(r+=",true");t+=i===0?r:";"+r}return t},this}function sortOptionsService(){return this.getSortOptions=function(){let n=[];return n.push(new SortOption(1,"Price desc","Price",sortDirection.descending)),n.push(new SortOption(2,"Price asc","Price",sortDirection.ascending)),n.push(new SortOption(3,"Date desc","DatePublished",sortDirection.descending)),n.push(new SortOption(4,"Date asc","DatePublished",sortDirection.ascending)),n.push(new SortOption(5,"User desc","UserName",sortDirection.descending)),n.push(new SortOption(6,"User asc","UserName",sortDirection.ascending)),n},this}function storageService(){return this.set=function(n,t){localStorage.setItem(n,t)},this.get=function(n){return localStorage.getItem(n)},this.remove=function(n){localStorage.removeItem(n)},this}function usersService(n,t,i){return this.tokenApiAddress=n.substring(0,n.length-4)+"Token",this.usersApiAdress=n+"Users",this.logIn=function(n){let t="grant_type=password&username="+n.userName+"&password="+n.password;return $.ajax({method:"POST",url:this.tokenApiAddress,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:t}).then(function(n){return i.set("token",n.access_token),!0}).fail(function(n){return console.log(n.message),!1})},this.signOut=function(){return i.remove("token"),!0},this.getUser=function(n){let i=this.usersApiAdress+"/"+n;return t({method:"GET",url:i})},this.createEditUser=function(n){return t.post(this.usersApiAdress,n)},this.deleteUser=function(n,i){return t({method:"DELETE",url:this.usersApiAdress+"/"+n,headers:{Authorization:"Bearer "+i}})},this.getUnreadMessages=function(n,i){return t({method:"GET",url:this.usersApiAdress+"/"+n+"/unread",headers:{Authorization:"Bearer "+i}})},this.markMessageRead=function(n,i,r){return t({method:"POST",url:this.usersApiAdress+"/"+n+"/MarkRead/"+r,headers:{Authorization:"Bearer "+i}})},this.changePassword=function(n,i){return t.post(this.usersApiAdress+"/"+n+"/changePassword",i)},this.resetPassword=function(n){return t.post(this.usersApiAdress+"/"+n+"/resetPassword")},this.getToken=function(){return i.get("token")},this}app.service("customAlertsService",["apiRootAddress","$http",customAlertsService]);app.service("favoritesService",["apiRootAddress","$http",favoritesService]);app.service("friendsService",["apiRootAddress","$http",friendsService]);app.service("improvementsService",["apiRootAddress","$http",improvementsService]);app.service("messagesService",["apiRootAddress","$http",messagesService]);app.service("othersService",["apiRootAddress","$http",othersService]);app.service("productNavigationService",["productsService","$q",productNavigationService]);app.service("productsService",["apiRootAddress","$http",productsService]);app.service("queryBuilderService",[queryBuilderService]);app.service("sortOptionsService",[sortOptionsService]);app.service("storageService",[storageService]);app.service("usersService",["apiRootAddress","$http","storageService",usersService]);