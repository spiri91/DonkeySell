<div class="container-fluid larger-font-size">
    <div class="row">
        <h3 class="subtitle centered-xs">{{isEdit? "Edit profile" : "Create profile"}}</h3>
        <br />
        <div class="col-xs-12 col-sm-8 col-sm-offset-2 alert alert-success fade in" ng-if="!isEdit">
            <a class="close" data-dismiss="alert" aria-label="close">&times;</a>
            <p>Chose your username wisely because it can not be change afterwards! :)</p>
            <p>After you register please confirm in the email you will receive, check the spam also.</p>
        </div>
    </div>
    <div ng-show="loading" loading-specific></div>
    <div ng-show="!loading">
        <div class="row">
            <div class="col-xs-12 col-sm-4 col-sm-offset-2 centered">
                <form name="registerForm">
                    <md-input-container class="md-block" name="username">
                        <md-tooltip>Should be between 5 and 15 characters!</md-tooltip>
                        <md-icon><i class="fa fa-user fa-2x"></i></md-icon>
                        <input type="text" class="text-input" ng-model="user.userName" placeholder="Username" ng-disabled="isEdit" ng-minlength="5" ng-maxlength="15" ng-change="checkUsername()" required ng-model-options="{ updateOn: 'default blur', debounce: { default: 1000, blur: 0 } }">
                    </md-input-container>
                    <md-input-container class="md-block" name="mail">
                        <md-icon><i class="fa fa-envelope fa-2x"></i></md-icon>
                        <input type="email" class="text-input" ng-model="user.email" placeholder="Email" ng-minlength="5" ng-maxlength="30" ng-change="checkEmail()" required ng-model-options="{ updateOn: 'default blur', debounce: { default: 1000, blur: 0 } }">
                    </md-input-container>
                    <md-input-container class="md-block" name="address">
                        <md-tooltip>Should be between 8 and 50 characters!</md-tooltip>
                        <md-icon><i class="fa fa-location-arrow fa-2x"></i></md-icon>
                        <input type="text" class="text-input" ng-model="user.address" placeholder="Address" ng-minlength="8" ng-change="checkAddress()" ng-maxlength="50" required ng-model-options="{ updateOn: 'default blur', debounce: { default: 1000, blur: 0 } }">
                    </md-input-container>
                    <md-input-container class="md-block" name="password">
                        <md-tooltip>Password should be between 8 and 16 characters, should contain at least one digit, one uppercase letter and no symbol characters!</md-tooltip>
                        <md-icon><i class="fa fa-key fa-2x"></i></md-icon>
                        <input class="text-input" placeholder="Password" ng-model="user.password" type="password" ng-change="checkPassword()" required ng-model-options="{ updateOn: 'default blur', debounce: { default: 1000, blur: 0 } }"><br />
                    </md-input-container>
                    <md-input-container class="md-block" name="confirmPassword">
                        <md-icon><i class="fa fa-circle fa-2x"></i></md-icon>
                        <input type="password" class="text-input" ng-model="confirmPassword" placeholder="Confirm password" ng-change="checkPasswordValidation()" required ng-model-options="{ updateOn: 'default blur', debounce: { default: 1000, blur: 0 } }" />
                    </md-input-container>
                </form>
            </div>
            <div class="col-xs-12 col-sm-4 centered">
                <md-input-container class="md-block">
                    <md-icon><i class="fa fa-facebook fa-2x"></i></md-icon>
                    <input type="text" class="text-input" ng-model="user.facebook" placeholder="Facebook address" ng-maxlength="40">
                </md-input-container>
                <md-input-container class="md-block">
                    <md-icon><i class="fa fa-twitter fa-2x"></i></md-icon>
                    <input type="text" class="text-input" ng-model="user.twitter" placeholder="Twitter address" ng-maxlength="40">
                </md-input-container>
                <md-input-container class="md-block">
                    <md-icon><i class="fa fa-phone fa-2x"></i></md-icon>
                    <input type="text" class="text-input" ng-model="user.phone" placeholder="Phone number" ng-maxlength="15">
                </md-input-container>
                <input type="file" style="display: none;" id="pictures" accept="image/*" onchange="angular.element(this).scope().setAvatar()" />
                <input type="button" class="btn btn-green" value="Select avatar" onclick="document.getElementById('pictures').click();" /><br />
                <img class="img img-circle image-small" ng-src="{{user.avatar}}" alt="avatar image" />
            </div>
        </div>
        <div class="row errors" ng-if="errors.length>0">
            <br />
            <div class="col-sm-10 col-sm-offset-1">
                <div class="row">
                    <div class="col-sm-4 centered" ng-animate="'animate'" ng-repeat="error in errors">
                        <div class="alert alert-warning">
                            <i class="fa fa-exclamation-triangle"></i>&nbsp;{{error.value}}
                        </div>
                    </div>
                </div>
            </div>
            <br />
        </div>
        <div class="row">
            <div class="col-xs-6 col-sm-6 centered">
                <md-button class="md-raised md-primary fixed-width" ng-click="register()" ng-disabled="registerForm.$invalid || errors.length>0 || checking==true">Save</md-button>
            </div>
            <div class="col-xs-6 col-xs-offset-0 col-sm-5 col-sm-offset-1 centered">
                <md-button class="md-raised fixed-width" ng-href="#/home">Cancel</md-button>
            </div>
        </div>
    </div>
</div>