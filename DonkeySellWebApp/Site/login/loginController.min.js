function loginController(n,t,i,r,u,f){n.username="";n.password="";n.rememberCredentials=!1;n.mailSent=!1;n.isLoading=!1;n.error=!1;var e="password",o="username";n.login=function(){n.isLoading=!0;let f=new User;f.userName=n.username;f.password=n.password;i.logIn(f).then(function(){r.success("Login successful!");n.rememberCredentialsOption();u.set(o,n.username);t.close(n.username)},function(){n.isLoading=!1;r.error("Login failed!");n.username=n.password=""})};n.cancel=function(){t.dismiss("cancel")};n.init=function(){n.username=u.get(o);n.password=u.get(e);n.username&&n.password&&(n.rememberCredentials=!0)};n.removeCredentialsFromMemory=function(){u.remove(e)};n.setCredentialsInMemory=function(){u.set(e,n.password)};n.rememberCredentialsOption=function(){n.rememberCredentials===!0?n.setCredentialsInMemory():n.removeCredentialsFromMemory()};n.resetPassword=function(){n.username?(n.isLoading=!0,i.resetPassword(n.username).then(function(){n.mailSent=!0;n.error=!1},function(n){console.log(n);r.error("Reset password failed! :(")}).finally(function(){n.isLoading=!1})):n.error=!0};n.register=function(){n.cancel();f.url("/register")};n.init()}app.controller("loginController",["$scope","$uibModalInstance","usersService","toastr","storageService","$location",loginController]);